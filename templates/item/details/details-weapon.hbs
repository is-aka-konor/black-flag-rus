{{> "blackFlag.equipment-attunement" }}

<fieldset class="properties checkbox-list">
	<legend>{{ localize "BF.Property.Label[other]" }}</legend>
	{{#each properties}}
		<label>
			<input type="checkbox" name="system.properties.{{ @key }}" {{ checked selected }}> {{ label }}
		</label>
	{{/each}}
</fieldset>

<fieldset>
	<legend>{{ localize "BF.WEAPON.Details" }}</legend>
	{{#if properties.magical.selected}}
		{{ formGroup fields.magicalBonus value=source.magicalBonus classes="label-hinted" localize=true rootId=partId }}
	{{/if}}
	<div class="damage form-group split-group">
		<label>{{ localize "BF.DAMAGE.Label" }}</label>
		<div class="form-fields">
			{{ formGroup fields.damage.fields.base.fields.number value=source.damage.base.number classes="label-top"
			             localize=true rootId=partId }}
			{{ formGroup fields.damage.fields.base.fields.denomination value=source.damage.base.denomination
			             options=CONFIG.dieSteps.labeledOptions classes="label-top" localize=true rootId=partId }}
			{{ formGroup fields.damage.fields.base.fields.type value=source.damage.base.type
			             options=CONFIG.damageTypes.localizedOptions classes="label-top" localize=true rootId=partId }}
		</div>
	</div>
	{{#if properties.ammunition.selected}}
		{{ formGroup fields.ammunition.fields.type value=source.ammunition.type options=CONFIG.ammunition.localizedOptions
		             localize=true rootId=partId }}
	{{/if}}
	{{#if properties.magazine.selected}}
		{{ formGroup fields.ammunition.fields.capacity value=source.ammunition.capacity localize=true rootId=partId }}
	{{/if}}
	{{#if (or (eq source.type.category "natural") (eq source.type.value "ranged") properties.thrown.selected)}}
		<div class="range form-group split-group">
			<label>{{ localize "BF.RANGE.Label" }}</label>
			<div class="form-fields">
				{{ formField fields.range.fields.short value=source.range.short classes="label-top" rootId=partId }}
				{{ formField fields.range.fields.long value=source.range.long classes="label-top" rootId=partId }}
				{{#unless properties.reach.selected}}
					{{ formField fields.range.fields.unit value=source.range.unit options=CONFIG.distanceUnits.localizedOptions
					             classes="label-top" rootId=partId }}
				{{/unless}}
			</div>
		</div>
	{{/if}}
	{{#if properties.reach.selected}}
		<div class="form-group split-group">
			<label>{{ localize "BF.Reach.Label" }}</label>
			<div class="form-fields">
				{{ formField fields.range.fields.reach value=source.range.reach classes="label-top" placeholder=reachPlaceholder
				             rootId=partId }}
				{{ formField fields.range.fields.unit value=source.range.unit options=CONFIG.distanceUnits.localizedOptions
				             classes="label-top" rootId=partId }}
			</div>
		</div>
	{{/if}}
</fieldset>

<fieldset class="options checkbox-list">
	<legend>{{ localize "BF.WEAPON.Option.Label[other]" }}</legend>
	{{#each options}}
		<label>
			<input type="checkbox" name="system.options.{{ @key }}" {{ checked selected }}>
			{{ label }}
		</label>
	{{/each}}
</fieldset>

{{> "blackFlag.item-activities" }}

<fieldset>
	<legend>{{ localize "BF.Override.Label[other]" }}</legend>
	{{ formGroup fields.overrides.fields.proficiency value=source.overrides.proficiency options=proficiencyOptions
	             input=inputs.createSelectInput localize=true rootId=partId }}
</fieldset>
