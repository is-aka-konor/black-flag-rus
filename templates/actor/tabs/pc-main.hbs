{{!-- Top Section --}}
<section class="top">

	<fieldset class="abilities">
		<legend>
			{{localize "BF.Ability.Label[other]"}}
			{{#if modes.editing}}
				<button type="button" class="link-button" data-action="config" data-type="ability"
				        aria-label="{{localize 'Configure'}}">
					<i class="fa-solid fa-cog" aria-hidden="true"></i>
				</button>
			{{/if}}
			{{blackFlag-notificationBadge actor category="abilities"}}
		</legend>
		{{#each system.abilities as |ability key|}}
			<div class="ability" data-key="{{key}}">
				<div class="ability-score">
					<span class="value">
						<label>
							<span class="label">{{localize ability.labels.full}}</span>
							<span class="score">{{#if ability.valid}}{{ability.value}}{{else}}&mdash;{{/if}}</span>
						</label>
					</span>
				</div>
				<div class="ability-mod">
					<button type="button" class="value" data-action="roll" data-sub-action="ability-check"
					        data-ability="{{key}}" aria-label="{{localize 'BF.Roll.Action.RollSpecific' type=(
									localize 'BF.Ability.Action.CheckSpecific' ability=(localize ability.labels.full))}}">
						{{#if ability.valid}}{{blackFlag-number ability.check.mod sign=true}}{{else}}&mdash;{{/if}}
					</button>
				</div>
				<div class="ability-save">
					<div class="proficiency-selector" data-multiplier="{{ability.save.proficiency.multiplier}}"
						data-rounding="{{ability.save.proficiency.rounding}}" aria-label="{{ability.save.proficiency.label}}">
						<blackFlag-icon src="systems/black-flag/artwork/interface/proficiency.svg"
						                aria-hidden="true"></blackFlag-icon>
						<input type="hidden" name="system.abilities.{{key}}.save.proficiency.multiplier"
						       value="{{ability._source.save.proficiency.multiplier}}">
					</div>
					<button type="button" class="value" data-action="roll" data-sub-action="ability-save"
					        data-ability="{{key}}" aria-label="{{localize 'BF.Roll.Action.RollSpecific' type=(
									localize 'BF.Ability.Action.SaveSpecificShort' ability=(localize ability.labels.full))}}">
						<svg class="label" viewBox="0 0 55 55" xmlns="http://www.w3.org/2000/svg"
						     xmlns:xlink="http://www.w3.org/1999/xlink" aria-label="{{localize 'BF.SavingThrow.LabelShort[one]'}}">
							<defs>
								<path id="path-0" d="M 45.5 27.5 A 18 18 0 0 1 27.5 45.5 A 18 18 0 0 1 9.5 27.5 A 18 18 0 0 1 27.5 9.5 A 18 18 0 0 1 45.5 27.5 Z"/>
							</defs>
							<text aria-hidden="true">
								<textPath xlink:href="#path-0">{{localize "BF.SavingThrow.LabelShort[one]"}}</textPath>
							</text>
						</svg>
						<span class="mod">
							{{#if ability.valid}}{{blackFlag-number ability.save.mod sign=true}}{{else}}&mdash;{{/if}}
						</span>
					</a>
				</div>
			</div>
		{{/each}}
	</fieldset>

</section>


{{!-- Left Column --}}
<section class="left">

	<fieldset class="armor-class">
		<legend>
			{{localize "BF.ArmorClass.Label"}}
			{{#if modes.editing}}
				<button type="button" class="link-button" data-action="config" data-type="armor-class"
				        aria-label="{{localize 'Configure'}}">
					<i class="fa-solid fa-cog" aria-hidden="true"></i>
				</button>
			{{/if}}
			{{blackFlag-notificationBadge actor category="armor-class"}}
		</legend>
		<div class="ac-shield">
			<blackFlag-icon src="systems/black-flag/artwork/interface/armor-class.svg"
			                class="frame" aria-hidden="true"></blackFlag-icon>
			<span class="value">{{system.attributes.ac.value}}</span>
		</div>
		<div class="ac-label">
			{{localize system.attributes.ac.label}}
		</div>
	</fieldset>

	<fieldset class="skills">
		<legend>
			{{localize "BF.Skill.Label[other]"}}
			{{#if modes.editing}}
				<button type="button" class="link-button" data-action="config" data-type="skill"
				        aria-label="{{localize 'Configure'}}">
					<i class="fa-solid fa-cog" aria-hidden="true"></i>
				</button>
			{{/if}}
			{{blackFlag-notificationBadge actor category="skills"}}
		</legend>
		{{#each system.proficiencies.skills as |skill key|}}
			<div class="skill block" data-key="{{key}}">
				<div class="proficiency-selector" data-multiplier="{{skill.proficiency.multiplier}}"
				     data-rounding="{{skill.proficiency.rounding}}" aria-label="{{skill.proficiency.label}}">
					<blackFlag-icon src="systems/black-flag/artwork/interface/proficiency.svg"
					                aria-hidden="true"></blackFlag-icon>
					<input type="hidden" name="system.proficiencies.skills.{{key}}.proficiency.multiplier"
					       value="{{skill._source.proficiency.multiplier}}">
				</div>
				<button type="button" class="unbutton" data-action="roll" data-sub-action="skill" data-skill="{{key}}">
					<span class="name">
						{{localize skill.labels.name}}
					</span>
					<span class="ability">
						{{lookup @root.CONFIG.abilities.localizedAbbreviations skill.ability}}
					</span>
					<span class="mod">{{#if skill.valid}}{{blackFlag-number skill.mod}}{{else}}&mdash;{{/if}}</span>
				</button>
			</div>
		{{/each}}
	</fieldset>

	<fieldset class="tools">
		<legend>
			{{localize "BF.Tool.Label[other]"}}
			{{#if modes.editing}}
				<button type="button" class="link-button" data-action="config" data-type="tool"
				        aria-label="{{localize 'Configure'}}">
					<i class="fa-solid fa-cog" aria-hidden="true"></i>
				</button>
			{{/if}}
			{{blackFlag-notificationBadge actor category="tools"}}
		</legend>
		{{#each system.proficiencies.tools as |tool key|}}
			<div class="tool block" data-key="{{key}}">
				<div class="proficiency-selector" data-multiplier="{{tool.proficiency.multiplier}}"
				     data-rounding="{{tool.proficiency.rounding}}" aria-label="{{tool.proficiency.label}}">
					<blackFlag-icon src="systems/black-flag/artwork/interface/proficiency.svg"
					                aria-hidden="true"></blackFlag-icon>
					<input type="hidden" name="system.proficiencies.tools.{{key}}.proficiency.multiplier"
					       value="{{tool._source.proficiency.multiplier}}">
				</div>
				<button type="button" class="unbutton" data-action="roll" data-sub-action="tool" data-tool="{{key}}">
					<span class="name">
						{{localize tool.label}}
					</span>
					<span class="ability">
						{{lookup @root.CONFIG.abilities.localizedAbbreviations tool.ability}}
					</span>
					<span class="mod">{{#if tool.valid}}{{blackFlag-number tool.mod}}{{/if}}</span>
				</button>
			</div>
		{{/each}}
	</fieldset>

</section>


{{!-- Center Column --}}
<section class="center">

	<fieldset class="luck">
		<legend>
			{{ localize "BF.Luck.Label" }}
			{{#if editable}}
				<button type="button" class="link-button" data-action="config" data-type="luck" tabindex="0"
								aria-label="{{ localize 'Configure' }}">
					<i class="fa-solid fa-cog" inert></i>
				</button>
			{{/if}}
		</legend>
		{{#if editable}}
			<button type="button" class="link-button" data-action="luck" data-sub-action="remove" tabindex="0"
			        data-tooltip="BF.Luck.Action.Remove" aria-label="{{ localize 'BF.Luck.Action.Remove' }}">
				<i class="fa-solid fa-minus" inert></i>
			</button>
		{{/if}}
		<ol class="luck-points">
			{{#each luckPoints}}
				<li class="luck-point{{#if selected}} selected{{/if}}"></li>
			{{/each}}
		</ol>
		{{#unless editable}}
			<button type="button" class="link-button" data-action="luck" data-sub-action="add" tabindex="0"
		        	data-tooltip="BF.Luck.Action.Add" aria-label="{{ localize 'BF.Luck.Action.Add' }}">
				<i class="fa-solid fa-plus" inert></i>
			</button>
		{{/unless}}
	</fieldset>

	<fieldset class="hit-points">
		<legend>{{localize "BF.HitPoint.Label[other]"}}</legend>
		<div class="main-hit-points">
			<label class="current-hit-points">
				<span class="label">{{localize "BF.HitPoint.Current.LabelShort"}}</span>
				<input class="value" type="text" name="system.attributes.hp.value" value="{{system.attributes.hp.value}}">
			</label>
			<div class="separator"></div>
			<label class="max-hit-points">
				<span class="label">{{localize "BF.HitPoint.Max.LabelShort"}}</span>
				<span class="value">{{system.attributes.hp.max}}</span>
			</label>
		</div>
		{{#unless (and (not system.attributes.hp.value) system.attributes.hp.max)}}
			<div class="other-hit-points">
				<label class="temp-hit-points">
					<span class="label">{{localize "BF.HitPoint.Temp.LabelShort"}}</span>
					<input class="value" type="text" name="system.attributes.hp.temp" value="{{system.attributes.hp.temp}}">
				</label>
			</div>
		{{else}}
			<div class="death-saves">
				<span>{{localize "BF.Death.Label[other]"}}</span>
				<blackflag-deathSaves>
					<input type="number" name="system.attributes.death.success" value="{{system.attributes.death.success}}"
						     min=0 step=1>
					<input type="number" name="system.attributes.death.failure" value="{{system.attributes.death.failure}}"
								 min=0 step=1>
				</blackflag-deathSaves>
			</div>
		{{/unless}}
		<div class="hit-dice">
			{{#each system.attributes.hd.d as |data denomination|}}
				<div class="denomination">
					<label class="label">d{{denomination}}</label>
					{{#if @root.modes.editing}}
						<input class="value" type="number" name="system.attributes.hd.d.{{denomination}}.available"
						       value="{{data.available}}" step=1 min=0 max={{data.max}}>
					{{else}}
						<span class="value">{{blackFlag-number data.available}}</span>
					{{/if}}
					<div class="separator"></div>
					<span class="max">{{blackFlag-number data.max}}</span>
					<button type="button" class="unbutton" data-action="roll" data-sub-action="hit-die"
					        data-denomination="{{denomination}}" {{disabled (eq data.available 0)}} aria-label="
									{{~localize 'BF.Roll.Action.RollSpecific' type=(
									localize 'BF.HitDie.LabelSpecific' denom=denomination)}}">
						<blackFlag-icon src="systems/black-flag/artwork/interface/dice/d{{denomination}}.svg"
						                class="die-icon blue" aria-hidden="true"></blackFlag-icon>
					</button>
				</div>
			{{/each}}
		</div>
	</fieldset>

	<fieldset class="initiative">
		<legend>
			{{localize "BF.Initiative.Label"}}
			{{#if editable}}
				<button type="button" class="link-button" data-action="config" data-type="initiative" tabindex="0"
				        aria-label="{{localize 'Configure'}}">
					<i class="fa-solid fa-cog" aria-hidden="true"></i>
				</button>
			{{/if}}
		</legend>
		<div class="block">
			<span class="value">{{blackFlag-number system.attributes.initiative.mod sign=true}}</span>
			<button class="unbutton" type="button" data-action="roll" data-sub-action="initiative" aria-label="
			        {{~localize 'BF.Roll.Action.RollSpecific' type=(localize 'BF.Initiative.Label')}}">
				<blackFlag-icon src="systems/black-flag/artwork/interface/dice/d20.svg"
				                class="die-icon blue" aria-hidden="true"></blackFlag-icon>
			</button>
		</div>
	</fieldset>

	<fieldset class="traits">
		<legend>{{localize "BF.Trait.Label[other]"}}</legend>
		{{#each traits}}
			<div class="trait block {{key}} {{classes}}">
				<label>
					<span>{{localize label}}</span>
					{{#if (and @root.modes.editing config)}}
						<button type="button" class="link-button" data-action="config" data-type="{{config}}" tabindex="0"
						        aria-label="{{localize 'Configure'}}">
							<i class="fa-solid fa-cog" aria-hidden="true"></i>
						</button>
					{{/if}}
				</label>
				<span>{{value}}</span>
			</div>
		{{/each}}
	</fieldset>

</section>


{{!-- Right Column --}}
<section class="right">

	<fieldset class="actions">
		<legend>{{localize "BF.Activation.Type.Action[other]"}}</legend>
		{{> "blackFlag.pc-actions"}}
	</fieldset>

</section>
