<fieldset>
	<legend>{{ localize "BF.ACTIVITY.FIELDS.effects.label" }}</legend>
	<multi-select name="appliedEffects">
		{{ selectOptions allEffects }}
	</multi-select>
	<ul class="configuration-list effects-list">
		{{#each appliedEffects}}
			<li data-index="{{ @index }}" data-effect-id="{{ effect.id }}" data-expand-id="effects.{{ effect.id }}">
				{{> ".effect" }}
			</li>
		{{/each}}
		{{#if editable}}
			<li class="add-control">
				<button type="button" class="link-button" data-action="addEffect">
					 <i class="fa-solid fa-plus" inert></i> {{ localize "BF.EFFECT.Action.Add" }}
				</button>
			</li>
		{{/if}}
	</ul>
</fieldset>

{{#*inline ".effect"}}
<div class="full-width flexrow">
	{{{ link }}}

	<div class="controls">
		{{#if @root.editable}}
			<button type="button" class="link-button" data-action="deleteEffect"
							data-tooltip="BF.EFFECT.Action.Delete"
							aria-label="{{ localize 'BF.EFFECT.Action.Delete' }}">
				<i class="fa-solid fa-trash" inert></i>
			</button>
		{{/if}}
	</div>
</div>
<input type="hidden" name="{{ prefix }}_id" value="{{ data._id }}">

{{#if additionalSettings}}
<div class="additional-tray collapsible {{ collapsed }}" data-action="toggleCollapsed">
	<label>
		<i class="fa-solid fa-gears" inert></i>
		<span>{{ localize "BF.AdditionalControls" }}</span>
		<i class="fa-solid fa-caret-down" inert></i>
	</label>
	<div class="collapsible-content">
		<div class="wrapper">
			{{> (lookup . "additionalSettings") }}
		</div>
	</div>
</div>
{{/if}}
{{/inline}}
